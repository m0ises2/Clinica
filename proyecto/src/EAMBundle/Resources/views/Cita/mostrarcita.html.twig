{% extends "::baseClinica.html.twig" %}

{% block styles %}
	{{ parent() }}
	<!-- DataTables CSS -->
    <link href="{{ asset('bundles/eam/css/datatablesplugins/integration/bootstrap/3/dataTables.bootstrap.css') }}" rel="stylesheet" type="text/css" />
	<!-- DataTables Responsive CSS -->
    <link href="{{ asset('bundles/eam/css/datatablesresponsive/css/dataTables.responsive.css') }}" rel="stylesheet" type="text/css" />  
{% endblock %}

{% block title %}  Mostrar Citas {% endblock %}

{% block content %}

	<div class="row">
		<div class="col-lg-12">
			<h2 class="page-header"> Citas </h2>
		</div>
	</div>

	<div class = "row">
		<div class = "col-lg-10 col-lg-offset-1">

			{% for flashMessage in app.session.flashbag.get('Añadida') %}
				<div class="alert alert-success alert-dismissable">
					<button class="close" aria-hidden="true" data-dismiss="alert" type="button">×</button>
					{{ flashMessage }}
				</div>
			{% endfor %}

			{% for flashMessage in app.session.flashbag.get('error') %}
    				<div class = "alert alert-danger alert-dismissable">
	    				<button class="close" aria-hidden="true" data-dismiss="alert" type="button">×</button>
	    				{{ flashMessage }}
	    			</div>
			{% endfor %}

			{% for flashMessage in app.session.flashbag.get('Actualizada') %}
				<div class="alert alert-success alert-dismissable">
					<button class="close" aria-hidden="true" data-dismiss="alert" type="button">×</button>
					{{ flashMessage }}
				</div>
			{% endfor %}

			{% for flashMessage in app.session.flashbag.get('Eliminada') %}
				<div class="alert alert-danger alert-dismissable">
					<button class="close" aria-hidden="true" data-dismiss="alert" type="button">×</button>
					{{ flashMessage }}
				</div>
			{% endfor %}

			<div class = "panel panel-info" >
				<div class = "panel-body" >
					<div class = "dataTable_wrapper">
						<table class="table table-striped table-bordered table-hover table-compact" id="dataTables-example" >
							<thead>
								<tr>
									<th>Nombre</th>
									<th>Apellido</th>
									<th>Fecha</th>
									<th>Hora</th>
									<th>Motivo</th>
									<th>Más</th>
								</tr>
							</thead>
							<tbody>
								{% for cita in citas %}
									<tr class="even gradeA">
										
										<td> {{ cita.paciente.nombre }} </td>
										<td> {{ cita.paciente.apellido }} </td>
										<td> {{ cita.fecha|date("d/m/Y") }} </td>
										<td> {{ cita.hora }} </td>
										<td> {{ cita.motivo }} </td>									
										<td>
											<div>
												<form method="POST" action="{{ path('Cita_elegir', { 'id': cita.id }) }}">	
													<button name="editar" class="btn btn-outline btn-primary btn-sm" type="submit">Editar</button>
													<button type="submit" name="eliminar" class="btn btn-outline btn-danger btn-sm">Eliminar</button>
												</form>												
											</div>
											
										</td>										
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>

{% endblock %}

{% block javascript %}
	{{ parent() }}

	<script src="{{ asset('bundles/eam/js/jquery.dataTables.min.js') }}"></script>
	<script src="{{ asset('bundles/eam/js/dataTables.bootstrap.min.js') }}"></script>

	<script>
    $(document).ready(function() {
        $('#dataTables-example').DataTable({
                responsive: true
        });
    });
    </script>

{% endblock %}